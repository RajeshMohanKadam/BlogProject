<!-- NG-Bootstrap modal template -->
<ng-template #authModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title">
      {{ isSignIn ? "Sign In" : "Sign Up" }}
    </h5>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="close()"
    ></button>
  </div>

  <div class="modal-body">
    <!-- SIGN IN FORM -->
    <form *ngIf="isSignIn" #signInForm="ngForm" (ngSubmit)="login(signInForm)">
      <div class="input-group mb-3 modern-input">
        <span class="input-group-text"><i class="bi bi-envelope"></i></span>
        <input
          type="email"
          class="form-control"
          placeholder="Enter email"
          name="email"
          ngModel
          #email="ngModel"
          required
          pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
        />
      </div>

      <div class="text-danger" *ngIf="email.invalid && email.touched">
        <span *ngIf="email.errors?.['required']">Email is required</span>
        <span *ngIf="email.errors?.['pattern']">Invalid email</span>
      </div>

      <div class="input-group mb-3 modern-input">
        <span class="input-group-text"><i class="bi bi-lock"></i></span>
        <input
          type="password"
          class="form-control"
          placeholder="Enter password"
          name="password"
          ngModel
          #password="ngModel"
          required
          minlength="4"
        />
      </div>

      <div class="text-danger" *ngIf="password.invalid && password.touched">
        <span *ngIf="password.errors?.['required']">Password is required</span>
      </div>

      <button class="btn modern-btn w-100 mt-2">Sign In</button>

      <p class="text-center mt-3 switch-text">
        Don't have an account?
        <a (click)="showSignUpForm($event)">Sign Up</a>
      </p>
    </form>

    <!-- SIGN UP FORM -->
    <form
      *ngIf="isSignUp"
      #signupForm="ngForm"
      (ngSubmit)="register(signupForm)"
    >
      <div class="input-group mb-3 modern-input">
        <span class="input-group-text"><i class="bi bi-person"></i></span>
        <input
          type="text"
          class="form-control"
          placeholder="Your name"
          name="name"
          ngModel
          #name="ngModel"
          required
        />
      </div>

      <div class="input-group mb-3 modern-input">
        <span class="input-group-text"><i class="bi bi-envelope"></i></span>
        <input
          type="email"
          class="form-control"
          placeholder="Enter email"
          name="email"
          ngModel
          #signupEmail="ngModel"
          required
        />
      </div>

      <div class="input-group mb-3 modern-input">
        <span class="input-group-text"><i class="bi bi-lock"></i></span>
        <input
          type="password"
          class="form-control"
          placeholder="Create password"
          name="password"
          ngModel
          #signupPass="ngModel"
          required
          minlength="6"
        />
      </div>

      <button class="btn modern-btn w-100 mt-2">Create Account</button>

      <p class="text-center mt-3 switch-text">
        Already have an account?
        <a (click)="showSignInForm($event)">Sign In</a>
      </p>
    </form>
  </div>
</ng-template>
